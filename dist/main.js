/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/styles/main.scss":
/*!******************************!*\
  !*** ./src/styles/main.scss ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/main.scss */ "./src/styles/main.scss");

let regionNames = new Intl.DisplayNames(['en'], {
  type: 'region'
});

function getPos() {
  return new Promise((res, rej) => {
    navigator.geolocation.getCurrentPosition(res, rej);
  });
}

function apiCall(latitude, longitude) {
  return fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(latitude, "&lon=").concat(longitude, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

function apiSearch(loc) {
  return fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(loc, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

async function weatherLoad() {
  try {
    const userPos = await getPos();
    const userLat = userPos.coords.latitude;
    const userLong = userPos.coords.longitude;
    const userAPI = await apiCall(userLat, userLong);

    if (userAPI.ok === true) {
      const userJSON = await userAPI.json();
      const userForecast = await weatherLoadForecast(userLat, userLong);
      const userForecastJSON = await userForecast.json();
      const fiveDay = [];
      userForecastJSON.list.forEach(item => {
        if (item.dt_txt.includes("12:00:00")) {
          fiveDay.push(item);
        }
      });
      const userWeatherData = {
        loc: userJSON.name,
        country: userJSON.sys.country,
        temp: userJSON.main.temp,
        feelsLike: userJSON.main.feels_like,
        desc: userJSON.weather[0].description.charAt(0).toUpperCase() + userJSON.weather[0].description.slice(1),
        humidity: userJSON.main.humidity,
        windSpeed: userJSON.wind.speed,
        icon: userJSON.weather[0].icon,
        forecast: fiveDay
      };
      return userWeatherData;
    } else {
      throw new Error(userAPI.statusText);
    }
  } catch (err) {
    console.log(err);
  }
}

function addForecast(weatherObj) {
  const main = document.querySelector('.main');
  const container = document.querySelector('.forecast');
  container.textContent = '';
  weatherObj.forecast.forEach(item => {
    const date = item.dt_txt.split(' ');
    const newDate = new Date(date[0]).toLocaleDateString();
    const forecastContainer = document.createElement('div');
    const fDate = document.createElement('p');
    const icon = document.createElement('img');
    icon.src = "https://openweathermap.org/img/wn/".concat(item.weather[0].icon, ".png");
    const fTemp = document.createElement('p');
    const fDesc = document.createElement('p');
    fDate.textContent = newDate;
    fTemp.textContent = "".concat(Math.round(item.main.temp), "\xB0C");
    fDesc.textContent = "".concat(item.weather[0].description.charAt(0).toUpperCase() + item.weather[0].description.slice(1));
    forecastContainer.appendChild(fDate);
    forecastContainer.appendChild(icon);
    forecastContainer.appendChild(fTemp);
    forecastContainer.appendChild(fDesc);
    container.appendChild(forecastContainer);
  });
  main.appendChild(container);
}

function weatherLoadForecast(latitude, longitude) {
  return fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(latitude, "&lon=").concat(longitude, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

function weatherSearchForecast(loc) {
  return fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(loc, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

async function searchWeather(location) {
  try {
    const weatherSearch = await apiSearch(location);

    if (weatherSearch.ok === true) {
      console.log(weatherSearch);
      const weatherJSON = await weatherSearch.json();
      const weatherForecast = await weatherSearchForecast(location);
      const weatherForecastJSON = await weatherForecast.json();
      const fiveDay = [];
      weatherForecastJSON.list.forEach(item => {
        if (item.dt_txt.includes("12:00:00")) {
          fiveDay.push(item);
        }
      });
      const weatherData = {
        loc: weatherJSON.name,
        country: weatherJSON.sys.country,
        temp: Math.round(weatherJSON.main.temp * 10 / 10),
        feelsLike: weatherJSON.main.feels_like,
        desc: weatherJSON.weather[0].description.charAt(0).toUpperCase() + weatherJSON.weather[0].description.slice(1),
        humidity: weatherJSON.main.humidity,
        windSpeed: weatherJSON.wind.speed,
        icon: weatherJSON.weather[0].icon,
        forecast: fiveDay
      };
      return weatherData;
    } else {
      throw new Error(weatherSearch.statusText);
    }
  } catch (err) {
    console.log(err);
  }
}

function addToDOM(weatherObj) {
  const main = document.querySelector('.main');
  const container = document.querySelector('.weather-info');
  container.textContent = '';
  const pLoc = document.createElement('p');
  const pTemp = document.createElement('p');
  const pFeels = document.createElement('p');
  const pDesc = document.createElement('p');
  const pHumid = document.createElement('p');
  const pWind = document.createElement('p');
  const icon = document.createElement('img');
  icon.src = "https://openweathermap.org/img/wn/".concat(weatherObj.icon, ".png");
  pLoc.textContent = "".concat(weatherObj.loc, ", ").concat(regionNames.of(weatherObj.country));
  pTemp.textContent = "Temperature: ".concat(Math.round(weatherObj.temp), "\xB0C (").concat(getBurgerTemperature(weatherObj.temp), "\xB0F)");
  pFeels.textContent = "Feels like: ".concat(Math.round(weatherObj.feelsLike), "\xB0C (").concat(getBurgerTemperature(weatherObj.feelsLike), "\xB0F)");
  pDesc.textContent = "Weather: ".concat(weatherObj.desc);
  pHumid.textContent = "Humidity: ".concat(weatherObj.humidity, "%");
  pWind.textContent = "Wind speed: ".concat(weatherObj.windSpeed, " m/s (").concat(getBurgerSpeed(weatherObj.windSpeed), " ft/s)");
  container.appendChild(pLoc);
  container.appendChild(pTemp);
  container.appendChild(pFeels);
  container.appendChild(pDesc);
  container.appendChild(pHumid);
  container.appendChild(pWind);
  container.appendChild(icon);
  main.appendChild(container);
}

function getBurgerTemperature(tempCel) {
  var temp = parseFloat(tempCel);
  return Math.round(temp * 9 / 5 + 32);
}

function getBurgerSpeed(speedMS) {
  var speed = parseFloat(speedMS);
  return Math.round(speed * 3.28084);
}

window.addEventListener('load', () => {
  weatherLoad().then(data => {
    addToDOM(data);
    addForecast(data);
  });
});
const input = document.querySelector('.weather-input');
const submitBtn = document.querySelector('.submit');
submitBtn.addEventListener('click', e => {
  e.preventDefault();
  const userInput = input.value;
  searchWeather(userInput).then(data => {
    addToDOM(data);
    addForecast(data);
  });
});
})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUJOLElBQXpCLENBQThCQyxJQUFJLElBQUk7SUFDbENoQixRQUFRLENBQUNnQixJQUFELENBQVI7SUFDQTVDLFdBQVcsQ0FBQzRDLElBQUQsQ0FBWDtFQUNILENBSEQ7QUFJSCxDQVBELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbm90aGVyLXdlYXRoZXItYXBwLy4vc3JjL3N0eWxlcy9tYWluLnNjc3MiLCJ3ZWJwYWNrOi8vYW5vdGhlci13ZWF0aGVyLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hbm90aGVyLXdlYXRoZXItYXBwL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYW5vdGhlci13ZWF0aGVyLWFwcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0ICcuL3N0eWxlcy9tYWluLnNjc3MnO1xuXG5sZXQgcmVnaW9uTmFtZXMgPSBuZXcgSW50bC5EaXNwbGF5TmFtZXMoWydlbiddLCB7dHlwZTogJ3JlZ2lvbid9KTtcblxuZnVuY3Rpb24gZ2V0UG9zKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihyZXMsIHJlaik7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gYXBpQ2FsbChsYXRpdHVkZSwgbG9uZ2l0dWRlKSB7XG4gICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP2xhdD0ke2xhdGl0dWRlfSZsb249JHtsb25naXR1ZGV9JnVuaXRzPW1ldHJpYyZhcHBpZD0zMWQ2MGFlMjI5MDYwMDI0NjRlMGU3ZjRlZjYwOGJjNWAsIHttb2RlOiAnY29ycyd9KTtcbn1cblxuZnVuY3Rpb24gYXBpU2VhcmNoKGxvYykge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke2xvY30mdW5pdHM9bWV0cmljJmFwcGlkPTMxZDYwYWUyMjkwNjAwMjQ2NGUwZTdmNGVmNjA4YmM1YCwge21vZGU6ICdjb3JzJ30pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdlYXRoZXJMb2FkKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJQb3MgPSBhd2FpdCBnZXRQb3MoKTtcbiAgICAgICAgY29uc3QgdXNlckxhdCA9IHVzZXJQb3MuY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICBjb25zdCB1c2VyTG9uZyA9IHVzZXJQb3MuY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgICAgY29uc3QgdXNlckFQSSA9IGF3YWl0IGFwaUNhbGwodXNlckxhdCwgdXNlckxvbmcpO1xuICAgICAgICBpZiAodXNlckFQSS5vayA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgdXNlckpTT04gPSBhd2FpdCB1c2VyQVBJLmpzb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJGb3JlY2FzdCA9IGF3YWl0IHdlYXRoZXJMb2FkRm9yZWNhc3QodXNlckxhdCwgdXNlckxvbmcpO1xuICAgICAgICAgICAgY29uc3QgdXNlckZvcmVjYXN0SlNPTiA9IGF3YWl0IHVzZXJGb3JlY2FzdC5qc29uKCk7XG4gICAgICAgICAgICBjb25zdCBmaXZlRGF5ID0gW107XG4gICAgICAgICAgICB1c2VyRm9yZWNhc3RKU09OLmxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5kdF90eHQuaW5jbHVkZXMoXCIxMjowMDowMFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBmaXZlRGF5LnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IHVzZXJXZWF0aGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBsb2M6IHVzZXJKU09OLm5hbWUsXG4gICAgICAgICAgICAgICAgY291bnRyeTogdXNlckpTT04uc3lzLmNvdW50cnksXG4gICAgICAgICAgICAgICAgdGVtcDogdXNlckpTT04ubWFpbi50ZW1wLFxuICAgICAgICAgICAgICAgIGZlZWxzTGlrZTogdXNlckpTT04ubWFpbi5mZWVsc19saWtlLFxuICAgICAgICAgICAgICAgIGRlc2M6IHVzZXJKU09OLndlYXRoZXJbMF0uZGVzY3JpcHRpb24uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB1c2VySlNPTi53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLnNsaWNlKDEpLFxuICAgICAgICAgICAgICAgIGh1bWlkaXR5OiB1c2VySlNPTi5tYWluLmh1bWlkaXR5LFxuICAgICAgICAgICAgICAgIHdpbmRTcGVlZDogdXNlckpTT04ud2luZC5zcGVlZCxcbiAgICAgICAgICAgICAgICBpY29uOiB1c2VySlNPTi53ZWF0aGVyWzBdLmljb24sXG4gICAgICAgICAgICAgICAgZm9yZWNhc3Q6IGZpdmVEYXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1c2VyV2VhdGhlckRhdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodXNlckFQSS5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkRm9yZWNhc3Qod2VhdGhlck9iaikge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JlY2FzdCcpO1xuICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcnO1xuICAgIHdlYXRoZXJPYmouZm9yZWNhc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGl0ZW0uZHRfdHh0LnNwbGl0KCcgJyk7XG4gICAgICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlWzBdKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZm9yZWNhc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgZkRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaWNvbi5zcmMgPSAgYGh0dHBzOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2l0ZW0ud2VhdGhlclswXS5pY29ufS5wbmdgO1xuICAgICAgICBjb25zdCBmVGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgY29uc3QgZkRlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cbiAgICAgICAgZkRhdGUudGV4dENvbnRlbnQgPSBuZXdEYXRlO1xuICAgICAgICBmVGVtcC50ZXh0Q29udGVudCA9IGAke01hdGgucm91bmQoaXRlbS5tYWluLnRlbXApfcKwQ2A7XG4gICAgICAgIGZEZXNjLnRleHRDb250ZW50ID0gYCR7aXRlbS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaXRlbS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLnNsaWNlKDEpfWA7XG5cbiAgICAgICAgZm9yZWNhc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoZkRhdGUpO1xuICAgICAgICBmb3JlY2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgZm9yZWNhc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoZlRlbXApO1xuICAgICAgICBmb3JlY2FzdENvbnRhaW5lci5hcHBlbmRDaGlsZChmRGVzYyk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JlY2FzdENvbnRhaW5lcik7XG4gICAgfSk7XG5cbiAgICBtYWluLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIHdlYXRoZXJMb2FkRm9yZWNhc3QobGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZvcmVjYXN0P2xhdD0ke2xhdGl0dWRlfSZsb249JHtsb25naXR1ZGV9JnVuaXRzPW1ldHJpYyZhcHBpZD0zMWQ2MGFlMjI5MDYwMDI0NjRlMGU3ZjRlZjYwOGJjNWAsIHttb2RlOiAnY29ycyd9KTtcbn1cblxuZnVuY3Rpb24gd2VhdGhlclNlYXJjaEZvcmVjYXN0KGxvYykge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZvcmVjYXN0P3E9JHtsb2N9JnVuaXRzPW1ldHJpYyZhcHBpZD0zMWQ2MGFlMjI5MDYwMDI0NjRlMGU3ZjRlZjYwOGJjNWAsIHttb2RlOiAnY29ycyd9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoV2VhdGhlcihsb2NhdGlvbikge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHdlYXRoZXJTZWFyY2ggPSBhd2FpdCBhcGlTZWFyY2gobG9jYXRpb24pO1xuICAgICAgICBpZiAod2VhdGhlclNlYXJjaC5vayA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cod2VhdGhlclNlYXJjaCk7XG4gICAgICAgICAgICBjb25zdCB3ZWF0aGVySlNPTiA9IGF3YWl0IHdlYXRoZXJTZWFyY2guanNvbigpO1xuICAgICAgICAgICAgY29uc3Qgd2VhdGhlckZvcmVjYXN0ID0gYXdhaXQgd2VhdGhlclNlYXJjaEZvcmVjYXN0KGxvY2F0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IHdlYXRoZXJGb3JlY2FzdEpTT04gPSBhd2FpdCB3ZWF0aGVyRm9yZWNhc3QuanNvbigpO1xuICAgICAgICAgICAgY29uc3QgZml2ZURheSA9IFtdO1xuICAgICAgICAgICAgd2VhdGhlckZvcmVjYXN0SlNPTi5saXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZHRfdHh0LmluY2x1ZGVzKFwiMTI6MDA6MDBcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZml2ZURheS5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCB3ZWF0aGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBsb2M6IHdlYXRoZXJKU09OLm5hbWUsXG4gICAgICAgICAgICAgICAgY291bnRyeTogd2VhdGhlckpTT04uc3lzLmNvdW50cnksXG4gICAgICAgICAgICAgICAgdGVtcDogTWF0aC5yb3VuZCgod2VhdGhlckpTT04ubWFpbi50ZW1wICogMTApIC8gMTApLFxuICAgICAgICAgICAgICAgIGZlZWxzTGlrZTogd2VhdGhlckpTT04ubWFpbi5mZWVsc19saWtlLFxuICAgICAgICAgICAgICAgIGRlc2M6IHdlYXRoZXJKU09OLndlYXRoZXJbMF0uZGVzY3JpcHRpb24uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3ZWF0aGVySlNPTi53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLnNsaWNlKDEpLFxuICAgICAgICAgICAgICAgIGh1bWlkaXR5OiB3ZWF0aGVySlNPTi5tYWluLmh1bWlkaXR5LFxuICAgICAgICAgICAgICAgIHdpbmRTcGVlZDogd2VhdGhlckpTT04ud2luZC5zcGVlZCxcbiAgICAgICAgICAgICAgICBpY29uOiB3ZWF0aGVySlNPTi53ZWF0aGVyWzBdLmljb24sXG4gICAgICAgICAgICAgICAgZm9yZWNhc3Q6IGZpdmVEYXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3ZWF0aGVyRGF0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAod2VhdGhlclNlYXJjaC5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkVG9ET00od2VhdGhlck9iaikge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWluZm8nKTtcbiAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSAnJztcbiAgICBjb25zdCBwTG9jID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHBUZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHBGZWVscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCBwRGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCBwSHVtaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgcFdpbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgaWNvbi5zcmMgPSBgaHR0cHM6Ly9vcGVud2VhdGhlcm1hcC5vcmcvaW1nL3duLyR7d2VhdGhlck9iai5pY29ufS5wbmdgXG5cbiAgICBwTG9jLnRleHRDb250ZW50ID0gYCR7d2VhdGhlck9iai5sb2N9LCAke3JlZ2lvbk5hbWVzLm9mKHdlYXRoZXJPYmouY291bnRyeSl9YDtcbiAgICBwVGVtcC50ZXh0Q29udGVudCA9IGBUZW1wZXJhdHVyZTogJHtNYXRoLnJvdW5kKHdlYXRoZXJPYmoudGVtcCl9wrBDICgke2dldEJ1cmdlclRlbXBlcmF0dXJlKHdlYXRoZXJPYmoudGVtcCl9wrBGKWA7XG4gICAgcEZlZWxzLnRleHRDb250ZW50ID0gYEZlZWxzIGxpa2U6ICR7TWF0aC5yb3VuZCh3ZWF0aGVyT2JqLmZlZWxzTGlrZSl9wrBDICgke2dldEJ1cmdlclRlbXBlcmF0dXJlKHdlYXRoZXJPYmouZmVlbHNMaWtlKX3CsEYpYDtcbiAgICBwRGVzYy50ZXh0Q29udGVudCA9IGBXZWF0aGVyOiAke3dlYXRoZXJPYmouZGVzY31gO1xuICAgIHBIdW1pZC50ZXh0Q29udGVudCA9IGBIdW1pZGl0eTogJHt3ZWF0aGVyT2JqLmh1bWlkaXR5fSVgO1xuICAgIHBXaW5kLnRleHRDb250ZW50ID0gYFdpbmQgc3BlZWQ6ICR7d2VhdGhlck9iai53aW5kU3BlZWR9IG0vcyAoJHtnZXRCdXJnZXJTcGVlZCh3ZWF0aGVyT2JqLndpbmRTcGVlZCl9IGZ0L3MpYDtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwTG9jKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocFRlbXApO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwRmVlbHMpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwRGVzYyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBIdW1pZCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBXaW5kKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG5cbiAgICBtYWluLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGdldEJ1cmdlclRlbXBlcmF0dXJlKHRlbXBDZWwpIHtcbiAgICB2YXIgdGVtcCA9IHBhcnNlRmxvYXQodGVtcENlbCk7XG4gICAgcmV0dXJuIE1hdGgucm91bmQodGVtcCAqIDkgLyA1ICsgMzIpO1xufVxuXG5mdW5jdGlvbiBnZXRCdXJnZXJTcGVlZChzcGVlZE1TKSB7XG4gICAgdmFyIHNwZWVkID0gcGFyc2VGbG9hdChzcGVlZE1TKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChzcGVlZCAqIDMuMjgwODQpO1xufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICB3ZWF0aGVyTG9hZCgpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGFkZFRvRE9NKGRhdGEpO1xuICAgICAgICBhZGRGb3JlY2FzdChkYXRhKTtcbiAgICB9KTtcbn0pXG5cbmNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItaW5wdXQnKTtcbmNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQnKTtcblxuc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdXNlcklucHV0ID0gaW5wdXQudmFsdWU7XG4gICAgc2VhcmNoV2VhdGhlcih1c2VySW5wdXQpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGFkZFRvRE9NKGRhdGEpO1xuICAgICAgICBhZGRGb3JlY2FzdChkYXRhKTtcbiAgICB9KTtcbn0pIl0sIm5hbWVzIjpbInJlZ2lvbk5hbWVzIiwiSW50bCIsIkRpc3BsYXlOYW1lcyIsInR5cGUiLCJnZXRQb3MiLCJQcm9taXNlIiwicmVzIiwicmVqIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJhcGlDYWxsIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJmZXRjaCIsIm1vZGUiLCJhcGlTZWFyY2giLCJsb2MiLCJ3ZWF0aGVyTG9hZCIsInVzZXJQb3MiLCJ1c2VyTGF0IiwiY29vcmRzIiwidXNlckxvbmciLCJ1c2VyQVBJIiwib2siLCJ1c2VySlNPTiIsImpzb24iLCJ1c2VyRm9yZWNhc3QiLCJ3ZWF0aGVyTG9hZEZvcmVjYXN0IiwidXNlckZvcmVjYXN0SlNPTiIsImZpdmVEYXkiLCJsaXN0IiwiZm9yRWFjaCIsIml0ZW0iLCJkdF90eHQiLCJpbmNsdWRlcyIsInB1c2giLCJ1c2VyV2VhdGhlckRhdGEiLCJuYW1lIiwiY291bnRyeSIsInN5cyIsInRlbXAiLCJtYWluIiwiZmVlbHNMaWtlIiwiZmVlbHNfbGlrZSIsImRlc2MiLCJ3ZWF0aGVyIiwiZGVzY3JpcHRpb24iLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiaHVtaWRpdHkiLCJ3aW5kU3BlZWQiLCJ3aW5kIiwic3BlZWQiLCJpY29uIiwiZm9yZWNhc3QiLCJFcnJvciIsInN0YXR1c1RleHQiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYWRkRm9yZWNhc3QiLCJ3ZWF0aGVyT2JqIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwidGV4dENvbnRlbnQiLCJkYXRlIiwic3BsaXQiLCJuZXdEYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImZvcmVjYXN0Q29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImZEYXRlIiwic3JjIiwiZlRlbXAiLCJmRGVzYyIsIk1hdGgiLCJyb3VuZCIsImFwcGVuZENoaWxkIiwid2VhdGhlclNlYXJjaEZvcmVjYXN0Iiwic2VhcmNoV2VhdGhlciIsImxvY2F0aW9uIiwid2VhdGhlclNlYXJjaCIsIndlYXRoZXJKU09OIiwid2VhdGhlckZvcmVjYXN0Iiwid2VhdGhlckZvcmVjYXN0SlNPTiIsIndlYXRoZXJEYXRhIiwiYWRkVG9ET00iLCJwTG9jIiwicFRlbXAiLCJwRmVlbHMiLCJwRGVzYyIsInBIdW1pZCIsInBXaW5kIiwib2YiLCJnZXRCdXJnZXJUZW1wZXJhdHVyZSIsImdldEJ1cmdlclNwZWVkIiwidGVtcENlbCIsInBhcnNlRmxvYXQiLCJzcGVlZE1TIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoZW4iLCJkYXRhIiwiaW5wdXQiLCJzdWJtaXRCdG4iLCJlIiwicHJldmVudERlZmF1bHQiLCJ1c2VySW5wdXQiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=