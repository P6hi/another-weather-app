/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/styles/main.scss":
/*!******************************!*\
  !*** ./src/styles/main.scss ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/main.scss */ "./src/styles/main.scss");

let regionNames = new Intl.DisplayNames(['en'], {
  type: 'region'
});

function getPos() {
  return new Promise((res, rej) => {
    navigator.geolocation.getCurrentPosition(res, rej);
  });
}

function apiCall(latitude, longitude) {
  return fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(latitude, "&lon=").concat(longitude, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

function apiSearch(loc) {
  return fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(loc, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

async function weatherLoad() {
  const userPos = await getPos();
  const userLat = userPos.coords.latitude;
  const userLong = userPos.coords.longitude;
  const userAPI = await apiCall(userLat, userLong);
  const userJSON = await userAPI.json();
  const userForecast = await weatherLoadForecast(userLat, userLong);
  const userForecastJSON = await userForecast.json();
  const fiveDay = [];
  userForecastJSON.list.forEach(item => {
    if (item.dt_txt.includes("12:00:00")) {
      fiveDay.push(item);
    }
  });
  const userWeatherData = {
    loc: userJSON.name,
    country: userJSON.sys.country,
    temp: userJSON.main.temp,
    feelsLike: userJSON.main.feels_like,
    desc: userJSON.weather[0].description.charAt(0).toUpperCase() + userJSON.weather[0].description.slice(1),
    humidity: userJSON.main.humidity,
    windSpeed: userJSON.wind.speed,
    icon: userJSON.weather[0].icon,
    forecast: fiveDay
  };
  return userWeatherData;
}

function addForecast(weatherObj) {
  const main = document.querySelector('.main');
  const container = document.querySelector('.forecast');
  container.textContent = '';
  weatherObj.forecast.forEach(item => {
    const date = item.dt_txt.split(' ');
    const newDate = new Date(date).toDateString();
    const forecastContainer = document.createElement('div');
    const fDate = document.createElement('p');
    const icon = document.createElement('img');
    icon.src = "http://openweathermap.org/img/wn/".concat(item.weather[0].icon, ".png");
    const fTemp = document.createElement('p');
    const fDesc = document.createElement('p');
    fDate.textContent = newDate;
    fTemp.textContent = "".concat(Math.round(item.main.temp), "\xB0C");
    fDesc.textContent = "".concat(item.weather[0].description.charAt(0).toUpperCase() + item.weather[0].description.slice(1));
    forecastContainer.appendChild(fDate);
    forecastContainer.appendChild(icon);
    forecastContainer.appendChild(fTemp);
    forecastContainer.appendChild(fDesc);
    container.appendChild(forecastContainer);
  });
  main.appendChild(container);
}

function weatherLoadForecast(latitude, longitude) {
  return fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(latitude, "&lon=").concat(longitude, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

function weatherSearchForecast(loc) {
  return fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(loc, "&units=metric&appid=31d60ae22906002464e0e7f4ef608bc5"), {
    mode: 'cors'
  });
}

async function searchWeather(location) {
  const weatherSearch = await apiSearch(location);
  const weatherJSON = await weatherSearch.json();
  const weatherForecast = await weatherSearchForecast(location);
  const weatherForecastJSON = await weatherForecast.json();
  const fiveDay = [];
  weatherForecastJSON.list.forEach(item => {
    if (item.dt_txt.includes("12:00:00")) {
      fiveDay.push(item);
    }
  });
  const weatherData = {
    loc: weatherJSON.name,
    country: weatherJSON.sys.country,
    temp: Math.round(weatherJSON.main.temp * 10 / 10),
    feelsLike: weatherJSON.main.feels_like,
    desc: weatherJSON.weather[0].description.charAt(0).toUpperCase() + weatherJSON.weather[0].description.slice(1),
    humidity: weatherJSON.main.humidity,
    windSpeed: weatherJSON.wind.speed,
    icon: weatherJSON.weather[0].icon,
    forecast: fiveDay
  };
  return weatherData;
}

function addToDOM(weatherObj) {
  const main = document.querySelector('.main');
  const container = document.querySelector('.weather-info');
  container.textContent = '';
  const pLoc = document.createElement('p');
  const pTemp = document.createElement('p');
  const pFeels = document.createElement('p');
  const pDesc = document.createElement('p');
  const pHumid = document.createElement('p');
  const pWind = document.createElement('p');
  const icon = document.createElement('img');
  icon.src = "http://openweathermap.org/img/wn/".concat(weatherObj.icon, ".png");
  pLoc.textContent = "".concat(weatherObj.loc, ", ").concat(regionNames.of(weatherObj.country));
  pTemp.textContent = "Temperature: ".concat(Math.round(weatherObj.temp), "\xB0C (").concat(getBurgerTemperature(weatherObj.temp), "\xB0F)");
  pFeels.textContent = "Feels like: ".concat(Math.round(weatherObj.feelsLike), "\xB0C (").concat(getBurgerTemperature(weatherObj.feelsLike), "\xB0F)");
  pDesc.textContent = "Weather: ".concat(weatherObj.desc);
  pHumid.textContent = "Humidity: ".concat(weatherObj.humidity, "%");
  pWind.textContent = "Wind speed: ".concat(weatherObj.windSpeed, " m/s (").concat(getBurgerSpeed(weatherObj.windSpeed), " ft/s)");
  container.appendChild(pLoc);
  container.appendChild(pTemp);
  container.appendChild(pFeels);
  container.appendChild(pDesc);
  container.appendChild(pHumid);
  container.appendChild(pWind);
  container.appendChild(icon);
  main.appendChild(container);
}

function getBurgerTemperature(tempCel) {
  var temp = parseFloat(tempCel);
  return Math.round(temp * 9 / 5 + 32);
}

function getBurgerSpeed(speedMS) {
  var speed = parseFloat(speedMS);
  return Math.round(speed * 3.28084);
}

window.addEventListener('load', () => {
  weatherLoad().then(data => {
    addToDOM(data);
    addForecast(data);
  });
});
const input = document.querySelector('.weather-input');
const submitBtn = document.querySelector('.submit');
submitBtn.addEventListener('click', e => {
  e.preventDefault();
  const userInput = input.value;
  searchWeather(userInput).then(data => {
    addToDOM(data);
    addForecast(data);
  });
});
})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0g7O0FBRUQ0QyxNQUFNLENBQUNDLGdCQUFQLENBQXdCLE1BQXhCLEVBQWdDLE1BQU07RUFDbENoRixXQUFXLEdBQUdpRixJQUFkLENBQW1CQyxJQUFJLElBQUk7SUFDdkJoQixRQUFRLENBQUNnQixJQUFELENBQVI7SUFDQTVDLFdBQVcsQ0FBQzRDLElBQUQsQ0FBWDtFQUNILENBSEQ7QUFJSCxDQUxEO0FBT0EsTUFBTUMsS0FBSyxHQUFHM0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLGdCQUF2QixDQUFkO0FBQ0EsTUFBTTJDLFNBQVMsR0FBRzVDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixTQUF2QixDQUFsQjtBQUVBMkMsU0FBUyxDQUFDSixnQkFBVixDQUEyQixPQUEzQixFQUFxQ0ssQ0FBRCxJQUFPO0VBQ3ZDQSxDQUFDLENBQUNDLGNBQUY7RUFDQSxNQUFNQyxTQUFTLEdBQUdKLEtBQUssQ0FBQ0ssS0FBeEI7RUFDQTdCLGFBQWEsQ0FBQzRCLFNBQUQsQ0FBYixDQUF5Qk4sSUFBekIsQ0FBOEJDLElBQUksSUFBSTtJQUNsQ2hCLFFBQVEsQ0FBQ2dCLElBQUQsQ0FBUjtJQUNBNUMsV0FBVyxDQUFDNEMsSUFBRCxDQUFYO0VBQ0gsQ0FIRDtBQUlILENBUEQsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2Fub3RoZXItd2VhdGhlci1hcHAvLi9zcmMvc3R5bGVzL21haW4uc2Nzcz8yZmY0Iiwid2VicGFjazovL2Fub3RoZXItd2VhdGhlci1hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYW5vdGhlci13ZWF0aGVyLWFwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2Fub3RoZXItd2VhdGhlci1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCAnLi9zdHlsZXMvbWFpbi5zY3NzJztcblxubGV0IHJlZ2lvbk5hbWVzID0gbmV3IEludGwuRGlzcGxheU5hbWVzKFsnZW4nXSwge3R5cGU6ICdyZWdpb24nfSk7XG5cbmZ1bmN0aW9uIGdldFBvcygpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24ocmVzLCByZWopO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGFwaUNhbGwobGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xuICAgcmV0dXJuIGZldGNoKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9sYXQ9JHtsYXRpdHVkZX0mbG9uPSR7bG9uZ2l0dWRlfSZ1bml0cz1tZXRyaWMmYXBwaWQ9MzFkNjBhZTIyOTA2MDAyNDY0ZTBlN2Y0ZWY2MDhiYzVgLCB7bW9kZTogJ2NvcnMnfSk7XG59XG5cbmZ1bmN0aW9uIGFwaVNlYXJjaChsb2MpIHtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtsb2N9JnVuaXRzPW1ldHJpYyZhcHBpZD0zMWQ2MGFlMjI5MDYwMDI0NjRlMGU3ZjRlZjYwOGJjNWAsIHttb2RlOiAnY29ycyd9KVxufVxuXG5hc3luYyBmdW5jdGlvbiB3ZWF0aGVyTG9hZCgpIHtcbiAgICBjb25zdCB1c2VyUG9zID0gYXdhaXQgZ2V0UG9zKCk7XG4gICAgY29uc3QgdXNlckxhdCA9IHVzZXJQb3MuY29vcmRzLmxhdGl0dWRlO1xuICAgIGNvbnN0IHVzZXJMb25nID0gdXNlclBvcy5jb29yZHMubG9uZ2l0dWRlO1xuICAgIGNvbnN0IHVzZXJBUEkgPSBhd2FpdCBhcGlDYWxsKHVzZXJMYXQsIHVzZXJMb25nKTtcbiAgICBjb25zdCB1c2VySlNPTiA9IGF3YWl0IHVzZXJBUEkuanNvbigpO1xuICAgIGNvbnN0IHVzZXJGb3JlY2FzdCA9IGF3YWl0IHdlYXRoZXJMb2FkRm9yZWNhc3QodXNlckxhdCwgdXNlckxvbmcpO1xuICAgIGNvbnN0IHVzZXJGb3JlY2FzdEpTT04gPSBhd2FpdCB1c2VyRm9yZWNhc3QuanNvbigpO1xuICAgIGNvbnN0IGZpdmVEYXkgPSBbXTtcbiAgICB1c2VyRm9yZWNhc3RKU09OLmxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0uZHRfdHh0LmluY2x1ZGVzKFwiMTI6MDA6MDBcIikpIHtcbiAgICAgICAgICAgIGZpdmVEYXkucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgY29uc3QgdXNlcldlYXRoZXJEYXRhID0ge1xuICAgICAgICBsb2M6IHVzZXJKU09OLm5hbWUsXG4gICAgICAgIGNvdW50cnk6IHVzZXJKU09OLnN5cy5jb3VudHJ5LFxuICAgICAgICB0ZW1wOiB1c2VySlNPTi5tYWluLnRlbXAsXG4gICAgICAgIGZlZWxzTGlrZTogdXNlckpTT04ubWFpbi5mZWVsc19saWtlLFxuICAgICAgICBkZXNjOiB1c2VySlNPTi53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdXNlckpTT04ud2VhdGhlclswXS5kZXNjcmlwdGlvbi5zbGljZSgxKSxcbiAgICAgICAgaHVtaWRpdHk6IHVzZXJKU09OLm1haW4uaHVtaWRpdHksXG4gICAgICAgIHdpbmRTcGVlZDogdXNlckpTT04ud2luZC5zcGVlZCxcbiAgICAgICAgaWNvbjogdXNlckpTT04ud2VhdGhlclswXS5pY29uLFxuICAgICAgICBmb3JlY2FzdDogZml2ZURheVxuICAgIH1cbiAgICByZXR1cm4gdXNlcldlYXRoZXJEYXRhO1xufVxuXG5mdW5jdGlvbiBhZGRGb3JlY2FzdCh3ZWF0aGVyT2JqKSB7XG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcmVjYXN0Jyk7XG4gICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XG4gICAgd2VhdGhlck9iai5mb3JlY2FzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBjb25zdCBkYXRlID0gaXRlbS5kdF90eHQuc3BsaXQoJyAnKTtcbiAgICAgICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKGRhdGUpLnRvRGF0ZVN0cmluZygpO1xuICAgICAgICBjb25zdCBmb3JlY2FzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBmRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBpY29uLnNyYyA9ICBgaHR0cDovL29wZW53ZWF0aGVybWFwLm9yZy9pbWcvd24vJHtpdGVtLndlYXRoZXJbMF0uaWNvbn0ucG5nYDtcbiAgICAgICAgY29uc3QgZlRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGNvbnN0IGZEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXG4gICAgICAgIGZEYXRlLnRleHRDb250ZW50ID0gbmV3RGF0ZTtcbiAgICAgICAgZlRlbXAudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKGl0ZW0ubWFpbi50ZW1wKX3CsENgO1xuICAgICAgICBmRGVzYy50ZXh0Q29udGVudCA9IGAke2l0ZW0ud2VhdGhlclswXS5kZXNjcmlwdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGl0ZW0ud2VhdGhlclswXS5kZXNjcmlwdGlvbi5zbGljZSgxKX1gO1xuXG4gICAgICAgIGZvcmVjYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGZEYXRlKTtcbiAgICAgICAgZm9yZWNhc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgIGZvcmVjYXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGZUZW1wKTtcbiAgICAgICAgZm9yZWNhc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoZkRlc2MpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9yZWNhc3RDb250YWluZXIpO1xuICAgIH0pO1xuXG4gICAgbWFpbi5hcHBlbmRDaGlsZChjb250YWluZXIpO1xufVxuXG5mdW5jdGlvbiB3ZWF0aGVyTG9hZEZvcmVjYXN0KGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9sYXQ9JHtsYXRpdHVkZX0mbG9uPSR7bG9uZ2l0dWRlfSZ1bml0cz1tZXRyaWMmYXBwaWQ9MzFkNjBhZTIyOTA2MDAyNDY0ZTBlN2Y0ZWY2MDhiYzVgLCB7bW9kZTogJ2NvcnMnfSk7XG59XG5cbmZ1bmN0aW9uIHdlYXRoZXJTZWFyY2hGb3JlY2FzdChsb2MpIHtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7bG9jfSZ1bml0cz1tZXRyaWMmYXBwaWQ9MzFkNjBhZTIyOTA2MDAyNDY0ZTBlN2Y0ZWY2MDhiYzVgLCB7bW9kZTogJ2NvcnMnfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFdlYXRoZXIobG9jYXRpb24pIHtcbiAgICBjb25zdCB3ZWF0aGVyU2VhcmNoID0gYXdhaXQgYXBpU2VhcmNoKGxvY2F0aW9uKTtcbiAgICBjb25zdCB3ZWF0aGVySlNPTiA9IGF3YWl0IHdlYXRoZXJTZWFyY2guanNvbigpO1xuICAgIGNvbnN0IHdlYXRoZXJGb3JlY2FzdCA9IGF3YWl0IHdlYXRoZXJTZWFyY2hGb3JlY2FzdChsb2NhdGlvbik7XG4gICAgY29uc3Qgd2VhdGhlckZvcmVjYXN0SlNPTiA9IGF3YWl0IHdlYXRoZXJGb3JlY2FzdC5qc29uKCk7XG4gICAgY29uc3QgZml2ZURheSA9IFtdO1xuICAgIHdlYXRoZXJGb3JlY2FzdEpTT04ubGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS5kdF90eHQuaW5jbHVkZXMoXCIxMjowMDowMFwiKSkge1xuICAgICAgICAgICAgZml2ZURheS5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfSlcbiAgICBjb25zdCB3ZWF0aGVyRGF0YSA9IHtcbiAgICAgICAgbG9jOiB3ZWF0aGVySlNPTi5uYW1lLFxuICAgICAgICBjb3VudHJ5OiB3ZWF0aGVySlNPTi5zeXMuY291bnRyeSxcbiAgICAgICAgdGVtcDogTWF0aC5yb3VuZCgod2VhdGhlckpTT04ubWFpbi50ZW1wICogMTApIC8gMTApLFxuICAgICAgICBmZWVsc0xpa2U6IHdlYXRoZXJKU09OLm1haW4uZmVlbHNfbGlrZSxcbiAgICAgICAgZGVzYzogd2VhdGhlckpTT04ud2VhdGhlclswXS5kZXNjcmlwdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdlYXRoZXJKU09OLndlYXRoZXJbMF0uZGVzY3JpcHRpb24uc2xpY2UoMSksXG4gICAgICAgIGh1bWlkaXR5OiB3ZWF0aGVySlNPTi5tYWluLmh1bWlkaXR5LFxuICAgICAgICB3aW5kU3BlZWQ6IHdlYXRoZXJKU09OLndpbmQuc3BlZWQsXG4gICAgICAgIGljb246IHdlYXRoZXJKU09OLndlYXRoZXJbMF0uaWNvbixcbiAgICAgICAgZm9yZWNhc3Q6IGZpdmVEYXlcbiAgICB9XG4gICAgcmV0dXJuIHdlYXRoZXJEYXRhO1xufVxuXG5mdW5jdGlvbiBhZGRUb0RPTSh3ZWF0aGVyT2JqKSB7XG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItaW5mbycpO1xuICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcnO1xuICAgIGNvbnN0IHBMb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgcFRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3QgcEZlZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHBEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHBIdW1pZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCBwV2luZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICBpY29uLnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke3dlYXRoZXJPYmouaWNvbn0ucG5nYFxuXG4gICAgcExvYy50ZXh0Q29udGVudCA9IGAke3dlYXRoZXJPYmoubG9jfSwgJHtyZWdpb25OYW1lcy5vZih3ZWF0aGVyT2JqLmNvdW50cnkpfWA7XG4gICAgcFRlbXAudGV4dENvbnRlbnQgPSBgVGVtcGVyYXR1cmU6ICR7TWF0aC5yb3VuZCh3ZWF0aGVyT2JqLnRlbXApfcKwQyAoJHtnZXRCdXJnZXJUZW1wZXJhdHVyZSh3ZWF0aGVyT2JqLnRlbXApfcKwRilgO1xuICAgIHBGZWVscy50ZXh0Q29udGVudCA9IGBGZWVscyBsaWtlOiAke01hdGgucm91bmQod2VhdGhlck9iai5mZWVsc0xpa2UpfcKwQyAoJHtnZXRCdXJnZXJUZW1wZXJhdHVyZSh3ZWF0aGVyT2JqLmZlZWxzTGlrZSl9wrBGKWA7XG4gICAgcERlc2MudGV4dENvbnRlbnQgPSBgV2VhdGhlcjogJHt3ZWF0aGVyT2JqLmRlc2N9YDtcbiAgICBwSHVtaWQudGV4dENvbnRlbnQgPSBgSHVtaWRpdHk6ICR7d2VhdGhlck9iai5odW1pZGl0eX0lYDtcbiAgICBwV2luZC50ZXh0Q29udGVudCA9IGBXaW5kIHNwZWVkOiAke3dlYXRoZXJPYmoud2luZFNwZWVkfSBtL3MgKCR7Z2V0QnVyZ2VyU3BlZWQod2VhdGhlck9iai53aW5kU3BlZWQpfSBmdC9zKWA7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocExvYyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBUZW1wKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocEZlZWxzKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocERlc2MpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwSHVtaWQpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwV2luZCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pO1xuXG4gICAgbWFpbi5hcHBlbmRDaGlsZChjb250YWluZXIpO1xufVxuXG5mdW5jdGlvbiBnZXRCdXJnZXJUZW1wZXJhdHVyZSh0ZW1wQ2VsKSB7XG4gICAgdmFyIHRlbXAgPSBwYXJzZUZsb2F0KHRlbXBDZWwpO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHRlbXAgKiA5IC8gNSArIDMyKTtcbn1cblxuZnVuY3Rpb24gZ2V0QnVyZ2VyU3BlZWQoc3BlZWRNUykge1xuICAgIHZhciBzcGVlZCA9IHBhcnNlRmxvYXQoc3BlZWRNUyk7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoc3BlZWQgKiAzLjI4MDg0KTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgd2VhdGhlckxvYWQoKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICBhZGRUb0RPTShkYXRhKTtcbiAgICAgICAgYWRkRm9yZWNhc3QoZGF0YSk7XG4gICAgfSk7XG59KVxuXG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWlucHV0Jyk7XG5jb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0Jyk7XG5cbnN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGlucHV0LnZhbHVlO1xuICAgIHNlYXJjaFdlYXRoZXIodXNlcklucHV0KS50aGVuKGRhdGEgPT4ge1xuICAgICAgICBhZGRUb0RPTShkYXRhKTtcbiAgICAgICAgYWRkRm9yZWNhc3QoZGF0YSk7XG4gICAgfSk7XG59KSJdLCJuYW1lcyI6WyJyZWdpb25OYW1lcyIsIkludGwiLCJEaXNwbGF5TmFtZXMiLCJ0eXBlIiwiZ2V0UG9zIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwiYXBpQ2FsbCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiZmV0Y2giLCJtb2RlIiwiYXBpU2VhcmNoIiwibG9jIiwid2VhdGhlckxvYWQiLCJ1c2VyUG9zIiwidXNlckxhdCIsImNvb3JkcyIsInVzZXJMb25nIiwidXNlckFQSSIsInVzZXJKU09OIiwianNvbiIsInVzZXJGb3JlY2FzdCIsIndlYXRoZXJMb2FkRm9yZWNhc3QiLCJ1c2VyRm9yZWNhc3RKU09OIiwiZml2ZURheSIsImxpc3QiLCJmb3JFYWNoIiwiaXRlbSIsImR0X3R4dCIsImluY2x1ZGVzIiwicHVzaCIsInVzZXJXZWF0aGVyRGF0YSIsIm5hbWUiLCJjb3VudHJ5Iiwic3lzIiwidGVtcCIsIm1haW4iLCJmZWVsc0xpa2UiLCJmZWVsc19saWtlIiwiZGVzYyIsIndlYXRoZXIiLCJkZXNjcmlwdGlvbiIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsIndpbmQiLCJzcGVlZCIsImljb24iLCJmb3JlY2FzdCIsImFkZEZvcmVjYXN0Iiwid2VhdGhlck9iaiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRhaW5lciIsInRleHRDb250ZW50IiwiZGF0ZSIsInNwbGl0IiwibmV3RGF0ZSIsIkRhdGUiLCJ0b0RhdGVTdHJpbmciLCJmb3JlY2FzdENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJmRGF0ZSIsInNyYyIsImZUZW1wIiwiZkRlc2MiLCJNYXRoIiwicm91bmQiLCJhcHBlbmRDaGlsZCIsIndlYXRoZXJTZWFyY2hGb3JlY2FzdCIsInNlYXJjaFdlYXRoZXIiLCJsb2NhdGlvbiIsIndlYXRoZXJTZWFyY2giLCJ3ZWF0aGVySlNPTiIsIndlYXRoZXJGb3JlY2FzdCIsIndlYXRoZXJGb3JlY2FzdEpTT04iLCJ3ZWF0aGVyRGF0YSIsImFkZFRvRE9NIiwicExvYyIsInBUZW1wIiwicEZlZWxzIiwicERlc2MiLCJwSHVtaWQiLCJwV2luZCIsIm9mIiwiZ2V0QnVyZ2VyVGVtcGVyYXR1cmUiLCJnZXRCdXJnZXJTcGVlZCIsInRlbXBDZWwiLCJwYXJzZUZsb2F0Iiwic3BlZWRNUyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiZGF0YSIsImlucHV0Iiwic3VibWl0QnRuIiwiZSIsInByZXZlbnREZWZhdWx0IiwidXNlcklucHV0IiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9